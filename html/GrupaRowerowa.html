<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Grupy rowerowe</title>
    <script src="https://kit.fontawesome.com/8164e1f9c8.js" crossorigin="anonymous"></script>

<link rel="stylesheet" href="../css/main.css">
</head>
<body>
        <header>
        <div>
            <div id="logo">
                <a href="./index.html"><img src="" alt="logo"></a>
            </div>

            <div><a href="./index.html">SUMP — Płock</a></div>
        </div>

        <nav>
            <ul>
                <li><a href="./GrupaRowerowa.html">CHATS</a></li>
                <li><a href="./Kontakty.html">CONTACT</a></li>
            </ul>
        </nav>

        <div id="settings">
            <i class="fa-solid fa-gear"></i>
        </div>

    </header>

<div class="container">

    <div class="group-list">
        <h2>Grupy rowerowe</h2>

        <div id="groupContainer">
            <div class="group-card">
                <div class="group-header">
                    <div class="group-info">
                        <div class="group-avatar"></div>
                        <div class="group-text">
                            <strong>Górska Ekipa</strong>
                            Ilość uczestników: 12<br>
                            Data: 10.06.2025 – 15.06.2025
                        </div>
                    </div>
                    <button class="expand">▼</button>
                </div>
                <div class="group-details">
                    <p><strong>Trasa i cel:</strong> Wyprawa wzdłuż szlaku beskidzkiego, noclegi pod namiotem.</p>
                    <span class="join">Dołącz +</span>
                </div>
            </div>
        </div>
    </div>

    <div class="create-group">
        <h3>Stwórz Grupę rowerową</h3>
        <div class="form-box">
            <label>Zdjęcie profilowe grupy:</label>
            <input style="color: white;" type="file" id="groupImage">

            <label>Nazwa grupy:</label>
            <input type="text" id="groupName" placeholder="Wpisz nazwę grupy">

            <label>Data rozpoczęcia i zakończenia:</label>
            <div style="display: flex; gap: 10px;">
                <input type="date" id="startDate"> 
                <input type="date" id="endDate">
            </div>

            <label>Lokalizacja podróży:</label>
            <input type="text" id="location" placeholder="np. Tatry, Mazury, Gdańsk">

            <label>Cel podróży:</label>
            <textarea id="goal" placeholder="Długi opis celu i trasy..."></textarea>

            <button class="create-btn" id="createBtn">Utwórz</button>
        </div>
    </div>

</div>

<script>
    // --- Funkcja rozwijania kart ---
    function setupExpandButtons() {
        document.querySelectorAll('.expand').forEach(button => {
            button.onclick = () => {
                const card = button.closest('.group-card');
                const isActive = card.classList.contains('active');

                document.querySelectorAll('.group-card').forEach(c => c.classList.remove('active'));
                document.querySelectorAll('.expand').forEach(b => b.classList.remove('rotated'));
                let toggleLeft = document.querySelector("#toggleLeft")
                let toggleRight = document.querySelector("#toggleRight")

                if (!isActive) {
                    card.classList.add('active');
                    button.classList.add('rotated');
                }
            };
        });
    }

    setupExpandButtons(); // inicjalizacja dla istniejących grup

    // --- Funkcja tworzenia nowych grup ---
    document.getElementById('createBtn').addEventListener('click', () => {
        const name = document.getElementById('groupName').value.trim();
        const start = document.getElementById('startDate').value;
        const end = document.getElementById('endDate').value;
        const loc = document.getElementById('location').value.trim();
        const goal = document.getElementById('goal').value.trim();
        const imageInput = document.getElementById('groupImage');

        if (!name || !start || !end || !loc || !goal) {
            alert("Proszę wypełnić wszystkie pola!");
            return;
        }

        const newCard = document.createElement('div');
        newCard.className = 'group-card';
        const imageURL = imageInput.files[0] ? URL.createObjectURL(imageInput.files[0]) : "";

        newCard.innerHTML = `
            <div class="group-header">
                <div class="group-info">
                    <div class="group-avatar" style="background-image: url('${imageURL}');"></div>
                    <div class="group-text">
                        <strong>${name}</strong>
                        Ilość uczestników: 1<br>
                        Data: ${start} – ${end}
                    </div>
                </div>
                <button class="expand">▼</button>
            </div>
            <div class="group-details">
                <p><strong>Trasa i cel:</strong> ${goal} (${loc})</p>
                <span style="margin-top: 5rem;" class="join">Dołącz +</span>
            </div>
        `;

        const container = document.getElementById('groupContainer');
        container.prepend(newCard);

        // Czyści formularz
        document.querySelectorAll('.form-box input, .form-box textarea').forEach(el => el.value = '');

        setupExpandButtons(); // ponowne aktywowanie przycisków
    });
</script>
</body>
</html>
